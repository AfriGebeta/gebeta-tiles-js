<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gebeta Maps Dev</title>
  <link rel="stylesheet" href="https://tiles.gebeta.app/static/gebeta-maps-lib.css" />
</head>
<body>
  <div id="map" style="width: 100vw; height: 100vh;"></div>
  <script type="module" src="https://tiles.gebeta.app/static/gebeta-maps.umd.js"></script>


<script>
    document.addEventListener('DOMContentLoaded', () => {
        const MY_GEBETA_API_KEY = "YOUR_API_KEY"; // Replace this!
        const gebetaMap = new GebetaMaps({ apiKey: MY_GEBETA_API_KEY });

        const map = gebetaMap.init({
            container: 'map',
            center: [38.7685, 9.0161],
            zoom: 15,
        });

        map.on('load', () => {
            gebetaMap.addNavigationControls();
        });

        gebetaMap.on('click', (e) => {
            const lngLat = [e.lngLat.lng, e.lngLat.lat];
            gebetaMap.addFencePoint(lngLat);
        });

        document.addEventListener('keydown', (e) => {
            if (e.key === 'c') {
                gebetaMap.clearFence();
            }
        });

        map.on('error', (e) => {
            const mapContainer = document.getElementById('map');
            if (mapContainer) {
                mapContainer.innerHTML = `<div style="padding: 20px; text-align: center;">
                    <h2>Could not load map style</h2>
                    <p>Please ensure the style server at <code>https://tiles.gebeta.app</code> is reachable.</p>
                </div>`;
            }
        });
    });
</script>

</body>
</html>
